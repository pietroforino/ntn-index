---
import Icons from "../components/Icons.astro";
---

<Icons />
<div class="menu">
  <div class="submenu">
    <a href="/">
      <img src="../ntn_logo_white.svg" alt="" />
    </a>
    <a href="/">index</a>
    <a href="/practice/">practice</a>
    <a href="/contacts/">contacts</a>
    <a target="_blank" href="https://ntnindex.bigcartel.com">objects</a>
  </div>
  <div id="theme-toggle"></div>
</div>

<style lang="scss">
  #theme-toggle {
    width: 10px;
    height: 10px;
    border-radius: 100%;
    cursor: pointer;
    background-color: white;
    user-select: none;
  }

  .menu {
    z-index: 1000;
    mix-blend-mode: difference;
    position: fixed;

    .submenu {
      display: flex;
      padding-top: 0.5rem;
      align-items: center;
      gap: 1rem;
      padding: 0;
    }

    img {
      width: 103px;
      margin-right: calc(2.5vw - 1rem);
    }
  }
</style>

<script is:inline>
  const btn = document.getElementById("theme-toggle");
  const main = document.querySelector("main");

  const saved = localStorage.getItem("theme");
  if (saved === "night") {
    main?.classList.add("night");
    btn.style.backgroundColor = "white";
  } else {
    btn.style.backgroundColor = "white";
  }

  btn?.addEventListener("click", () => {
    const html = document.documentElement;
    const isNight = html.dataset.theme === "night";
    btn.style.backgroundColor = !isNight ? "white" : "white";
    if (isNight) {
      html.dataset.theme = "light";
      localStorage.setItem("theme", "light");
    } else {
      html.dataset.theme = "night";
      localStorage.setItem("theme", "night");
    }
  });
</script>
